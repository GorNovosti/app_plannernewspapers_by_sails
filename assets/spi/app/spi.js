/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */
/*jslint */
/*global require: false, define: false, requirejs: false,
  window: false, clearInterval: false, document: false,
  self: false, setInterval: false */


define('domReady',[],function () {
    

    var isTop, testDiv, scrollIntervalId,
        isBrowser = typeof window !== "undefined" && window.document,
        isPageLoaded = !isBrowser,
        doc = isBrowser ? document : null,
        readyCalls = [];

    function runCallbacks(callbacks) {
        var i;
        for (i = 0; i < callbacks.length; i += 1) {
            callbacks[i](doc);
        }
    }

    function callReady() {
        var callbacks = readyCalls;

        if (isPageLoaded) {
            //Call the DOM ready callbacks
            if (callbacks.length) {
                readyCalls = [];
                runCallbacks(callbacks);
            }
        }
    }

    /**
     * Sets the page as loaded.
     */
    function pageLoaded() {
        if (!isPageLoaded) {
            isPageLoaded = true;
            if (scrollIntervalId) {
                clearInterval(scrollIntervalId);
            }

            callReady();
        }
    }

    if (isBrowser) {
        if (document.addEventListener) {
            //Standards. Hooray! Assumption here that if standards based,
            //it knows about DOMContentLoaded.
            document.addEventListener("DOMContentLoaded", pageLoaded, false);
            window.addEventListener("load", pageLoaded, false);
        } else if (window.attachEvent) {
            window.attachEvent("onload", pageLoaded);

            testDiv = document.createElement('div');
            try {
                isTop = window.frameElement === null;
            } catch (e) {}

            //DOMContentLoaded approximation that uses a doScroll, as found by
            //Diego Perini: http://javascript.nwbox.com/IEContentLoaded/,
            //but modified by other contributors, including jdalton
            if (testDiv.doScroll && isTop && window.external) {
                scrollIntervalId = setInterval(function () {
                    try {
                        testDiv.doScroll();
                        pageLoaded();
                    } catch (e) {}
                }, 30);
            }
        }

        //Check if document already complete, and if so, just trigger page load
        //listeners. Latest webkit browsers also use "interactive", and
        //will fire the onDOMContentLoaded before "interactive" but not after
        //entering "interactive" or "complete". More details:
        //http://dev.w3.org/html5/spec/the-end.html#the-end
        //http://stackoverflow.com/questions/3665561/document-readystate-of-interactive-vs-ondomcontentloaded
        //Hmm, this is more complicated on further use, see "firing too early"
        //bug: https://github.com/requirejs/domReady/issues/1
        //so removing the || document.readyState === "interactive" test.
        //There is still a window.onload binding that should get fired if
        //DOMContentLoaded is missed.
        if (document.readyState === "complete") {
            pageLoaded();
        }
    }

    /** START OF PUBLIC API **/

    /**
     * Registers a callback for DOM ready. If DOM is already ready, the
     * callback is called immediately.
     * @param {Function} callback
     */
    function domReady(callback) {
        if (isPageLoaded) {
            callback(doc);
        } else {
            readyCalls.push(callback);
        }
        return domReady;
    }

    domReady.version = '2.0.1';

    /**
     * Loader Plugin API method
     */
    domReady.load = function (name, req, onLoad, config) {
        if (config.isBuild) {
            onLoad(null);
        } else {
            domReady(onLoad);
        }
    };

    /** END OF PUBLIC API **/

    return domReady;
});


define('cs',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

// Generated by CoffeeScript 1.7.1

/*
Namespace module
 */

(function() {
  define('cs!namespace',[], function() {
    var _default_namespace;
    _default_namespace = 'app';
    return _default_namespace;
  });

}).call(this);


// Generated by CoffeeScript 1.7.1

/*
Module dependencies
 */

(function() {
  define('cs!module',['angular', 'cs!./namespace', 'cs!states', 'angular-ui-router', 'angular-ui-router.stateHalper'], function(angular, namespace, states) {
    var module;
    module = angular.module(namespace, ['ui.router', 'ui.router.stateHelper']);
    module.config([
      'stateHelperProvider', function(stateHelperProvider) {
        return stateHelperProvider.setNestedState(states);
      }
    ]);
    module.run([
      function() {
        console.log('run for module', namespace);
        return states.resolve = [];
      }
    ]);
    return module;
  });

}).call(this);

define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

define('text!templates/about.tpl.html',[],function () { return '<!-- template "about.tpl.html"-->\r\n<section>   \r\n    <h1 class="text text-center">About: </h1>\r\n \r\n    <hr>  \r\n</section>\r\n<!-- //template "about.tpl.html"-->';});


// Generated by CoffeeScript 1.7.1

/*
Cache content of template(s) with current name space
 */

(function() {
  define('cs!templates/templatesCache',['cs!./../module', 'cs!./../namespace', 'text!./about.tpl.html'], function(module, namespace, tplIndex) {
    console.log(module);
    return module.run([
      '$templateCache', function($templateCache) {
        return $templateCache.put("templates/" + (namespace.replace(/\.+/g, "/")) + "/about.tpl.html", tplIndex);
      }
    ]);
  });

}).call(this);


// Generated by CoffeeScript 1.7.1

/*
    Entry point in module
 */

(function() {
  define('cs!index',['cs!./namespace', 'cs!./module', 'cs!./templates/templatesCache'], function(namespace) {
    return namespace;
  });

}).call(this);

/***
 *  
 */
define('spi',['domReady!', 'angular', 'cs!./namespace', /*'sails.io',*/'cs!./index'], function (document, angular, namespace, /* io,*/ spi) {

    var app = angular.module('spi' + namespace, [spi]);
    app.config(['$locationProvider', function ($locationProvider) {
            $locationProvider.html5Mode(true);
        }
    ]);
    app.run([function(){
            console.warn('run');
    }]);
    console.log(app['name'], '--OK2- 4-', spi);
    try {
        return angular.bootstrap(
                document, [app['name'], function () {
//            var socket = io.connect('http://127.0.0.1:1337/');
//            socket.on('connect', function socketConnected(l) {
//                console.log('Socket is now connected',l);
//            });  
                        //   angular.element(document).find('html').addClass('ng-app');
                    }]);
    } catch (e) {
        console.error(e.stack || e.message || e);
    }
});

// Generated by CoffeeScript 1.7.1

/*
https://github.com/angular-ui/ui-router/wiki/Nested-States-%26-Nested-Views
 */

(function() {
  define('cs!about/state',['cs!./../namespace'], function(namespace) {
    return {
      name: 'about',
      url: 'about',
      templateUrl: "templates/" + (namespace.replace(/\.+/g, "/")) + "/about.tpl.html"
    };
  });

}).call(this);


// Generated by CoffeeScript 1.7.1

/*
https://github.com/angular-ui/ui-router/wiki/Nested-States-%26-Nested-Views
 */

(function() {
  define('cs!states',['cs!./about/state'], function(about_state) {
    return {
      name: 'root',
      url: '/',
      template: '<section ui-view></section>',
      children: [about_state]
    };
  });

}).call(this);

